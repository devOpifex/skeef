(() => {
  // front-end/app.js
  document.addEventListener("DOMContentLoaded", function() {
    let locationsInput = document.getElementById("locationsStream");
    if (locationsInput != null) {
      let locationsWarning = document.getElementById("locationsWarning");
      locationsInput.addEventListener("input", (event) => {
        if (event.data == null) {
          locationsWarning.innerHTML = "";
          return;
        }
        locationsWarning.innerHTML = "Few tweets are geo-tagged; this dramatically reduces the number of tweets streamed.";
      });
    }
  });
  document.addEventListener("socket", function() {
    window.socket.onopen = () => {
      socket.send("Client Connected");
    };
    window.socket.onclose = () => {
      console.log("Websocket closed");
    };
    window.socket.onerror = (error) => {
      console.log(error);
    };
    let ntweets = document.getElementById("ntweets");
    window.socket.onmessage = (data) => {
      let parsed = JSON.parse(data.data);
      console.log(parsed);
      if (parsed.tweetsCount == 0) {
        return;
      }
      ntweets.innerText = parsed.tweetsCount;
    };
  });
})();
